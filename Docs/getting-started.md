## はじめてのガイド（YouTube運用支援ツール）

このドキュメントは、はじめて本ツールを使う方向けの簡潔なガイドです。難しい専門用語は避け、できるだけやさしく説明します。迷ったらこのページを上から順番に読めば大丈夫です。

---

## このツールでできること

- キーワードでYouTube動画を検索できます（例: 「薄毛 対策 シャンプー」）。
- 直近期間（半年〜3年）や国（日本/米国など）で絞り込めます。
- 最低再生数や「登録者数に対する再生数の比率（例: 3倍以上）」でフィルターできます。
- YouTube Shorts（ショート動画）を含める/除外する/のみ対象にできます。
- 検索結果からチャンネルの登録者数や国、いいね数、公開日などを確認できます。
- 各動画のコメントを取得してCSVにエクスポートできます。
- 動画一覧もCSVでダウンロードできます（分析・共有に便利）。
- スマホ/PCの両方で使いやすいレスポンシブUIです。

データは全てYouTubeの公開情報をYouTube Data API v3経由で取得します。ログインは不要で、APIキーのみで利用できます。

---

## なぜYouTube APIが必要？（やさしい説明）

YouTubeの公開データに安全にアクセスするために「APIキー」という鍵が必要です。これは「このアプリからの問い合わせです」とYouTubeに伝える身分証のようなものです。

- APIキーは無料で作成できます（使用量には1日の上限＝クォータがあり、使いすぎると当日は制限されます）。
- 本ツールは「公開データ」だけを読み取ります。動画の視聴や編集などの権限は使いません。
- APIキーはブラウザ（あなたの端末）の`localStorage`にのみ保存され、サーバに送信されません。
- いつでも削除・再生成できます。

---

## YouTube Data API キーの取得方法（5〜10分）

以下の手順でAPIキーを作成します。怖くありません。画面の案内に沿って進めればOKです。

1. Googleアカウントでログインします。
2. Google Cloud Console を開きます（`https://console.cloud.google.com/`）。
3. 右上付近のプロジェクト選択から、新しいプロジェクトを作成します（任意の名前でOK）。
4. 左側メニューの「API とサービス」→「ライブラリ」を開きます。
5. 検索欄に「YouTube Data API v3」と入力し、該当APIを「有効にする」を押します。
6. 左側メニューの「認証情報」を開き、「認証情報を作成」→「API キー」を選びます。
7. 生成されたAPIキーをメモします（あとでツールに貼り付けます）。
8. できればセキュリティのために制限を設定します。
   - アプリケーション制限（任意）:
     - Webでホスティングして使う場合 → 「HTTP リファラ」を選び、あなたのドメイン（例: `https://example.com/*`）を追加。
     - ローカル専用で使う場合は制限なしでも動きます（公開しない前提）。
   - API制限（推奨）: 「YouTube Data API v3」だけに制限します。

ヒント: 課金設定は通常不要です。YouTube Data APIは無料クォータ内で使えます。大量に使う場合は上限に達することがあります（「quotaExceeded」エラー）。

---

## 注意点（大事だけど怖くない）

- APIキーは他人と共有しない・公開リポジトリにコミットしない。
- 万一漏えいしたら、Google Cloud Consoleの「認証情報」から削除・再生成してください。
- クォータ（1日の使用量上限）があります。上限に達したら翌日まで待つか、検索条件を絞って使ってください。
- YouTube/Googleの利用規約に従ってください。取得したデータの取り扱い（個人情報・著作権・再配布など）に注意しましょう。

---

## 使い方（ステップバイステップ）

1. アプリを開く
   - デプロイ先URLがある場合は、そのURLを開きます。
   - ローカルで使う場合は、リポジトリを取得して `index.html` をブラウザで開くだけでも動作します。必要なら簡易サーバ（例: VS Code の Live Server）を使ってもOKです。

2. APIキーを入れて保存
   - 画面上部の入力欄にAPIキーを貼り付け、「保存」を押します。
   - 成功すると「有効」と表示されます。エラーの場合はメッセージに従ってください。
   - APIキーは端末の`localStorage`に保存され、次回から自動で復元されます。

3. 検索条件を設定
   - キーワード: 例「薄毛 対策 シャンプー」。未入力の場合はサンプル語句が使われます。
   - 最低再生数: 例「10000」。この値以上の再生数の動画を対象にします。
   - 国指定: 例「日本（JP）」。空欄なら指定なし。
   - 対象期間: 直近半年/1年/2年/3年から選べます。
   - 取得件数: 一度に取得する件数（表示と処理の目安）。
   - ショートの扱い: 「含めない/含める/のみ」から選択。
   - 登録者比しきい値: 例「3倍以上」。再生数が登録者数の何倍以上かでフィルタします。
   - 登録者数非公開チャンネルも含める: チェックすると登録者情報が非公開でも最低再生数のみで判定します。

4. 検索を実行
   - 「検索」を押すと取得が始まります。進捗（ページ数/件数）が表示されます。
   - 結果は再生数の多い順に並びます。Shortsはバッジ表示されます。

5. 結果を見る・選ぶ
   - 表にはサムネ・タイトル・チャンネル・再生数・登録者数（非公開の場合は「非公開」）・高評価・公開日・国が表示されます。
   - 行頭のチェックボックスで複数選択ができます。「全件選択」ボタンもあります。

6. コメントを取得・CSV出力
   - 特定の動画行の「取得」ボタンでコメントを取得できます（100件単位で自動で継ぎ足し取得）。
   - コメントを取得済みの動画は件数が表示されます。
   - 「↓ CSV」でその動画のコメントCSVを保存できます。
   - 上部の「↓ 選択コメントCSV出力」で、選択中の複数動画ぶんをまとめてCSVにできます。

7. 動画一覧のCSV出力
   - 「↓ 一覧CSV出力」で、検索結果全体をCSVで保存します。
   - CSVの列には、`videoId`、`title`、`channelId`、`channelTitle`、`publishedAt`、`viewCount`、`subscriberCount`、`likeCount`、`country`、`videoUrl`、`thumbnailUrl`、`matchedRule`、`keywords`、`searchedAt` などが含まれます。

8. よくある質問（トラブルシュート）
   - APIキーが有効にならない: キーの入力ミスやAPI未有効化、API制限の設定を確認。YouTube Data API v3が「有効」になっているかチェック。
   - 結果が出ない: キーワード・期間・国・最低再生数・ショート設定・登録者比の組み合わせを見直し。条件が厳しすぎる場合があります。
   - 使っていると途中で止まる/エラーになる: クォータ上限（quotaExceeded）や一時的なネットワーク障害の可能性。時間を置いて再試行。
   - CSVが文字化けする: Googleスプレッドシートでの読み込みを推奨。Excelの場合は「データの取得/インポート」でUTF-8として読み込む方法を使うと安心です。

---

## プライバシーとデータの保存

- APIキーはブラウザの`localStorage`に保存されます。削除したい場合は、入力欄を空にして「保存」するか、ブラウザのサイトデータを削除してください。
- 取得した動画・コメントデータはブラウザ上のメモリで扱われ、サーバ側には保存しません。

---

## 免責

- 本ツールの利用は自己責任でお願いします。YouTube/GoogleのAPI仕様変更やクォータ制限等により、予告なく動作が変わる可能性があります。
- 公開データの取り扱いに際しては、各サービスの利用規約および法令を遵守してください。

---

## 付録：クォータの目安（参考）

YouTube Data API v3のコスト目安（2025年現在の一般的な目安。詳細は公式ドキュメントを参照してください）。

- `search.list`: おおよそ 100 ユニット/回
- `videos.list`: おおよそ 1 ユニット/回
- `channels.list`: おおよそ 1 ユニット/回
- `commentThreads.list`: おおよそ 1 ユニット/回

検索条件を絞る・取得件数を抑えることでクォータ消費を節約できます。

---

困った時は、プロジェクト内の`CLAUDE.md`やリポジトリのREADME、あるいはこのドキュメントを見直してください。わからない点があれば課題管理（Issue）に質問を書くのもおすすめです。
